/*! monday_group_challenge 2015-08-11 */
function generateAndPopulate(){$.ajax({type:"POST",url:"/data/20",success:function(){requestUsers()}})}function requestUsers(){$.ajax({type:"GET",url:"/data",success:function(a){appendPeople(a)}})}function deleteUser(a,b){$.ajax({type:"DELETE",url:"/data/"+a,success:function(a){console.log(a),b.remove()}})}function appendPeople(a){for(var b=$(".person-container").empty();a.length>0;){for(var c=$("<div/>",{"class":"row"}),d=0;4>d;d++){var e=a.shift(),f=$("<div/>",{"class":"employee-card col-md-3"}),g=$("<div/>",{"class":"panel panel-primary"}),h=$("<div/>",{"class":"panel-heading"}),i=$("<div/>",{"class":"panel-body"}),j=$("<i/>",{"class":"fa fa-twitter"}),k=$("<i/>",{"class":"fa fa-globe"}),l=$("<i/>",{"class":"fa fa-wrench"}),m=$("<i/>",{"class":"fa fa-hourglass-start"}),n=$("<p>",{text:e.twitterhandle}).prepend(j),o=$("<p>",{text:e.age}).prepend(m),p=$("<p>",{text:e.gender}).prepend(l),q=$("<p>",{text:e.location}).prepend(k),r=$("<h2/>",{text:e.name}),s=$("<button/>",{"class":"btn btn-danger",text:"X","data-id":e._id});h.append(r),h.append(s),i.append(n),i.append(o),i.append(p),i.append(q),g.append(h),g.append(i),f.append(g),c.append(f)}b.append(c)}}$(document).ready(function(){requestUsers(),$("#genUserBtn").on("click",function(){generateAndPopulate()}),$(".person-container").on("click","button",function(){var a=$(this).data("id"),b=$(this).closest(".employee-card");deleteUser(a,b)})});